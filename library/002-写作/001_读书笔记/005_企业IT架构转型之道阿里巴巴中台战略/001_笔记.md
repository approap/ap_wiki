# 引言  
>原以为中国的技术都是“拿来主义”，中国互联网公司站在世界的舞台上依靠的是庞大的消费基数，没有想到阿里会学习，会破，会拓展。  
  
# 作者与作品信息  
>标题：企业IT架构转型之道-阿里巴巴中台战略思想与架构实战  
作者: 钟华（花名：古谦）阿里巴巴中间件首席架构师  
出版社: 机械工业出版社  
出版年: 2017-4-1  
  
# 主题摘要  
>  在当今整个中国社会都处于互联网转型的浪潮中，不管是政府职能单位、业务规模庞大的央企，还是面临最激烈竞争的零售行业都处于一个重要的转折点，这个转折对企业业务模式带来了冲击，当然也给企业的信息中心部门带来了挑战：如何构建IT系统架构更好地满足互联网时代下企业业务发展的需要。阿里巴巴的共享服务理念以及企业级互联网架构建设的思路，给这些企业带来了不少新的思路，这也是作者最终决定写这本书的最主要原因。      
>  本书从阿里巴巴启动中台战略说起，详细阐述了共享服务理念给企业业务发展带来的业务价值。接着会分享阿里巴巴在建设共享服务体系时如何进行技术框架的选择，哪些重要的技术平台支撑起了共享服务体系，这也是迄今为止对阿里巴巴集团中间件体系对外最全面系统的介绍。除了技术层面之外，本书还分享了阿里巴巴内部的一些经验和实践，如组织的架构和体制如何更好地支持共享服务体系的持续发展。  
  
## 个人的感受摘要  
>  水,流进来,流出去。沉淀进管道,灵活转换，输出给前端,流出去给三方。管道是稳定的,可扩展组件化的,组件可沉淀。  
>  互联网的理念可应用于传统，灵活,小步快跑,可扩展,面对的需求更灵活。  
>  技术就是生产力。有那么一拨人，已经为技术能改变世界而兴奋不已。  
  
+ 阿里的发展：单war---》分布式---》平台式---》中台式  
+ 关键影响点：个人技能---》架构（小的），设计模式---》业务建模---》大的架构，数据统一。流向对内对外。  
+ 通俗点：一块地，农夫使用锄头的技巧、力气;种了两块地，使用工具、拖拉机;种了多块地，生产过程流程化，翻地，浇水，除草，种植，收获每个阶段各总结成一套流程。种任何地，农业产业化，从过程中统一数据、进一步分析，进而优化服务，服务可以适用场景。可推广到国外。  
  
## 个人批注及笔记  
### 目录  
```  
第一部分　引子  
第1章　阿里巴巴集团中台战略引发的思考  
第2章　构建业务中台的基础——共享服务体系  
第二部分　共享服务体系搭建  
第3章　分布式服务框架的选择  
第4章　共享服务中心建设原则  
第5章　数据拆分实现数据库能力线性扩展  
第6章　异步化与缓存原则  
第7章　打造数字化运营能力  
第8章　打造平台稳定性能力  
第9章　共享服务中心对内和对外的协作共享  
第三部分　阿里巴巴能力输出与案例  
第10章　大型央企互联网转型  
第11章　时尚行业品牌公司互联网转型  
```
### 第一部分　引子  
### 第1章　阿里巴巴集团中台战略引发的思考  
1.supercell，中译-超级细胞，芬兰游戏公司，《部落冲突》好玩，后来Tencent购入。  
公司特点：小团队运作，快，试错能力强。  
2. 中国特色，如同阿里的“花名”  
    [笔记]远程调用 夸父  
资源管理 伏羲  
安全 钟馗  
分布协同 女娲  
集群调度 大禹  
![](assets\写作\001_读书笔记\005_企业IT架构转型之道阿里巴巴中台战略\架构位置.PNG)  
3. 各个“烟囱”下的全局会员及消费数据  
4. 我们目前仅能提供这样的服务”，导致最终的结果是新业务系 统认为该服务不可用，逼着他们在自己的系统中重新又实现了一套跟 这个服务差不多的功能模块，也就是产生了一个新的烟囱。  
    [笔记] 技术人员从模块本身出发的思维，“目前是怎样实现的，这种搞不成。。。”  
5. 服务提供者团队拥有不错做事的态度，也愿意改造服务以满 足新业务的需求，但受限于之前服务设计时的通用性和业务前瞻性的 不足，造成如果要满足新业务的需求，就要对现有服务的数据模型、 业务逻辑做较大的改造，在改造带来的风险和满足新业务需求的选择 中，更多的团队选择了放弃对新业务需求的支持，而保持现有服务提 供的稳定，其结果跟第一种情况完全一样  
6. 无一不认可信息技术部门对于企业发展的重要地位，每家企业中 信息中心部门的行政级别均和核心业务部门的级别相当。但实际上， 行政级别的平等并不代表着具有同样平等的部门话语权！  
    [笔记] 心理上建立、认同信息技术的核心地位。  
7. 但我所说的懂业务是指，能对业务的下一步发展有着自己的理解和看法  
    [笔记]只知现有的,看不到没有的  
8. 但这样**能力的提升与工作时 间的长短并不是呈线性增长的**，更多的时候，我们看到能力较强的员 工能体现自己价值的地方在于负责的项目更大，甚至同时负责多个项 目，而这在我看来终归是增加了项目经验，并不能在某一专业领域得 到知识和经验的沉淀，我相信随着时间的流逝，越来越多的人会慢慢 失去最初的工作积极性和创造性。这样的最终结果是IT信息中心的员 工很少有能在一个业务领域做足够的深入了解和业务沉淀，更多的是 对业务知其然，而不知其所以然，也谈不上成为业务领域专家，更不 可能对业务发展有创新想法和独到见解。   
### 第2章　构建业务中台的基础——共享服务体系  
1. SOA理念最核心的价值：松耦合的 服务带来业务的复用，通过服务的编排助力业务的快速响应和创新。 这本身就是一种**本末倒置**，SOA理念的提出原本是真正为企业的IT系 统建设指出了一条光明大道，真正体现SOA核心价值的正是这些服 务，只有这些服务在业务发展的过程中得到持续的演进、功能逐步完  善和增强，最终变为企业在该领域最为**专业的IT资产**时，才能真正达 到SOA中所描述的业务的快速响应，更好地支持业务创新。而这些观 念其实在SOA项目的初期都是被企业客户欣然接受的，但一旦进入到 项目实施层面，**SOA的项目就沦为了实现多个系统间的集成。**   
    [笔记]出现的时机太晚导致后续的选择   
2. 共享业务事业部的5大价值定位  
    [笔记]开放  服务  滋养  稳定  数据  
3. 知识点串成了知识线  
    [笔记]点、线、镜头拉远，很多线组成人体脉络  
4. 技术上没有任何错误和异常，但从业务的角度出现了偏差  
5. BCP（Business Check Platform，业务校验保障平台），使用业务规则的方式，通过 BCP平台对交易进行业务和逻辑上的校验  
6. “点、线、面”的理论，在“点”上 根本感知不到的问题，在“线”和“面”的平台上，更容易发现这些问题 的本质  
7. 缺少能基于数据有业务建模能力的专家  

### 第二部分　共享服务体系搭建  
### 第3章　分布式服务框架的选择  
1. 服务稳定性、服务能力的扩展性、服务需求的快速响应能力 提出了前所未有的更高要求  
    [笔记]权利大了,责任越大  
2. ESB这样一个中心服务总线  
3. SOA的主要特性：   
    ·面向服务的分布式计算。   
    ·服务间松散耦合。   
    ·支持服务的组装。   
    ·服务注册和自动发现。   
    ·以服务契约方式定义服务交互方式。 
可以看到，SOA并没有定义出一定是基于ESB总线的方式，而在互联网行业中兴起的“去中心化”分布式服务框架同样遵循了以上对SOA架构的特征定义。所以接下来讨论的“中心化”和“去中心化”服务框架均是SOA的实现，并不是两套体系。 首先我想表达的观点是，这两套SOA的架构并没有优劣之分，淘宝最终选择“去中心化”服务架构作为整个集团统一的服务框架并不代表着“去中心化”服务框架是“中心化”服务框架的升级版本，而基于这 两套架构解决企业的根本诉求是完全不同的。1）ESB模式的“中心化”服务架构的根本诉求。回顾2004年左右业界提出SOA理念的背景，正是大型软件公司已经发现，越来越多的企业在多年的IT建设过程中，逐渐构建了越来越多的IT系统，这些IT系统无不例外都是采用“烟囱式”系统建设模式而建立的，使得企业内 ESB的方式成为这一时期SOA实现的主流，而这一种架构解决的根本诉求是实现异构系统之间的交互  
4. “去中心化”分布式服务框架 建设系统，其根本原因就在于扩展性是首要  
5. 而对于不同技术接口的支持、数据格式转换、服 务动态路由等功能就没有在“去中心化”的平台中有所体现，更多情况 是依靠服务应用的编写来满足这样的需求  
6. 互联网转型浪潮  
    [笔记]来势汹汹  

### 第4章　共享服务中心建设原则  
1. 用户中心相比于商品、交易中心在业务复杂程度和重要性上都要小一些，所以对于采用 新架构进行的重构尝试，能将服务化改造的风险降到比较低的水准  
    [笔记]简单模块试用  
2. 再到第三阶段，由于上层业务的需求多样化以及对服务层提 出更多定制化以及业务快速反应的需求，部分服务中心就逐步向平台 化的方面演进  
3. 提供界面形式的服务能力  
4. 服务中心中的服务形态多样性  
    [笔记]标题  
5. 服务中心提供的服务能力不拘泥于形式，从大类来看，可以分成 以下三类:依赖于接口的服务：依赖于工具的服务;依赖于数据的服务  
6. 架构本来就是一个追求平衡的艺术， 不仅是设计原则上的平衡，还要在技术、成本、资源、性能、团队等 各方面进行平衡，以最高效地解决主要问题  
7. 所有的原则 和方法都是为了这些目标服务的，“以终为始”  
8. 我们期望服务中心是承载业务逻辑、 沉淀业务数据、产生业务价值的业务单元。  
9. 业务的运营性有两个层面含义  
    [笔记]1 业务本身的活力，属于沉淀  2 创新，形成数据模型，业务逻辑、业务生产闭环  
10. 商品巡检技术采用区块链  
11. 数据来源、数据分析、业务生产可以自然形成闭环。所以能否用大数据能力提升运营水平是服务中心 原则之一。   

### 第5章　数据拆分实现数据库能力线性扩展  
1. 所谓的事务边界即是指单个SQL语句在后端数 据库上同时执行的数量，上面示例中就是事务边界大的典型示例，即 一条SQL语句同时被推送到后端所有数据库中运行  
2. 你会发现整个平台的数据库连接数量是取决于后端单个数据 库的连接能力  
    [笔记]木桶短板  
3. **异构索引表**，最终通过两次访问效率最高的SQL请求代替了之前需要进行 全表扫描的问题  
4. 如果最后发送到分布式数据层的SQL语句中没有分库键，则通过 对“库名+表名+主键值”哈希后对线程数取模，这样就能让同一条记录 的数据同步事件处理都会在同一线程中顺序执行，保证了该记录多次  
变更的顺序性，但是不保证不同记录间的顺序。如果SQL语句中有分 库键，则通过“库名+分库键值”哈希后对线程数取模，效果是保证不 同逻辑表针对相同分库逻辑的记录变化顺序  

### 第6章　异步化与缓存原则  
1. 本章将首先结合淘宝平台中典型的交易场景，描述在分布式服务 架构中，如何通过业务流程异步化，即通过服务异步调用的方式让业 务流程中业务逻辑上允许同步执行的服务同时被调用，从而解决了大 量远程服务线性调用带来的性能问题。接着介绍数据进行分库分表 后，数据在进行异步操作的场景下，阿里巴巴采用哪些事务处理方式 实现该场景下事务一致性与数据库处理性能的平衡。最后通过对商品秒杀场景技术架构的介绍，来说明缓存技术在此类场景中所扮演的重 要角色。   
2. 对于有严格先后调用关系的服务保持顺序执行，对于能 够同步执行的所有服务均采用异步化方式处理  
3. **ACID**（英文中是酸）和**BASE**（英文中有碱性的意思）在化学的 世界中两者（酸和碱）是完全对立的，具有独特而相反的性质。在实 际的系统设计中，不同业务场景对一致性要求是不同的，因此ACID 和BASE一般在系统中又会结合使用。那为什么在今天互联网应用中 会更广泛采用柔性事务而放弃传统数据库事务来解决业务事务性问 题？ 刚刚提到，柔性事务是由于互联网应用的需求产生的，那么需要 看互联网应用的核心诉求是什么。互联网应用的最核心需求是高可用   
4. BASE是指基本可用（Basically Available）、柔性状态（Soft State）、最终一致性（Eventual Consistency  
5. 幂等=同一操作反复执行多次结果不变  
6. 消息服务 在其中扮演了事务日志的职能

### 第7章　打造数字化运营能力  
1. 甚至出现了问题没人承认  
2. 将获取当前上下文的TraceID 和RpcID打包成了SDK并封装到了应用运行容器层  
    [笔记]一样  
3. 从运维平台向运营平台  
    [笔记]后台到业务  
4. [笔记]日志的精确性,完整性  

### 第8章　打造平台稳定性能力  
1. 页面也会包含跳转引导界面  
    [笔记]用户体验周到  
2. 配置中心带上服务的权重信息，服务消费者在选择服务提供者进行服务调用的时 候，就能按照权重信息选择每次调用的服务提供者，从而就能控制所 有服务提供者被服务请求的流量大小。这样当发现某些服务提供者出 现服务响应慢或系统资源负载飙高时，实时降低对该服务器的服务路 由权重（甚至直接降为0），最终达到通过自动化的流量调度来隔离 故障  
    [笔记]服务的玩法  
3. 业务一致性平台  
    [笔记]业务审计平台  

### 第9章 共享服务中心对内和对外的协作共享  
1. 淘宝商家IT服务商是主动参与者，他们持续地往整 个体系中注入自己的智慧和创新的源泉  
2. 这些公平的社会资源，谁能将这些资源有效地整合，能更好地解决社会的问题，能改变百姓的生活方式，推 进社会的发展，谁就将站在社会发展的风口上高飞  
3. 这些沉淀的服务将会是企业最大的资产。  
### 第三部分　阿里巴巴能力输出与案例  
1. 企业可以更好地使用互联网技术、利用互联网服务、借鉴互联网企业运营模式，更好地实现价值链中各节点的连接，让流程更加透明，业务更加可视，挖掘企业的瓶颈，更好 地满足消费者的需求，以期获得更好的成长。  
    [笔记]水,流进来,流出去。沉淀进管道,灵活及时给前端,流出去给三方,或对接现有三方系统。管道是稳定的,可扩展组件化的,组件可沉淀。互联网的理念可应用于传统，灵活,小步快跑,可扩展,面对的需求更灵活。技术就是生产力  
  
# 相关文献链接  
[pdf全本](http://readfree.me/book/27039508/)
# 延伸  
[DT时代](https://baike.baidu.com/item/DT%E6%97%B6%E4%BB%A3/16236625?fr=aladdin)
[阿里IT架构转型的实践](https://book.douban.com/review/9055851/)  
  
